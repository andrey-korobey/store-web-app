# Система управления инвентаризацией

Этот проект является веб-приложением, которое позволяет пользователям управлять товарами на складах в различных локациях.
Приложение написано на Flask, использует Flask-RESTful для маршрутизации API и базу данных MySQL,
к которой подключается через Flask-SQLAlchemy.

## Используемые технологии
- Flask
- Flask-RESTful
- MySQL
- nginx
- uWSGI
- Docker
- docker-compose

## Начало работы

Чтобы начать работу с этим проектом, выполните следующие шаги:

### 1. Склонируйте репозиторий:
```
git clone "https://github.com/andrey-korobey/store-web-app.git"
```

### 2. Создайте файл `.env` в корневом каталоге со следующими переменными:
```
# параматры сервера MySql
MYSQL_DATABASE - имя базы 
MYSQL_USER - имя пользователя
MYSQL_PASSWORD - пароль пользователя
MYSQL_ROOT_PASSWORD - пароль root пользователя

#Параметры Flask-приложения
FLASK_SQLALCHEMY_DATABASE_URI=mysql+pymysql://{user}:{password}@{host}:{port}/{db_name} - путь к базе данных.
FLASK_DEBUG - включение debug режима
FLASK_DEMO - включение режима демонстрации
```
ВАЖНО! При запуске в ДЕМО режиме все ваши данные из таблиц сотрутся! Не используйте его совместно со своей рабочей базой!

### 3. Запустите Docker-контейнеры:
Для запуска контейнеров хост-машине должны быть установлены docker и [docker-compose](https://github.com/docker/compose)
```
docker-compose up
```

Если вы используете другой mysql-сервер, вы можете запустить приложение двумя способами, но предварительно внесите необходимые параметры в файл .env.
#### - Запуск приложения в docker-compose:
```
docker-compose up webserver
```
#### - Запуск только контейнера веб приложения при помощи docker.

Сначала соберите ваш образ:
```
docker build -t your-web_server-image .
```
Затем запустите его:
```
docker run --name store-web-server -d -v ./flask_app:/flask_app:ro -v ./frontend:/usr/share/nginx/html/static:ro -p 80:80 --env-file .env --restart always your-web_server-image
```

Здесь `your-web_server-image` должен быть заменен на имя образа, который вы собрали для своего сервиса `web_server`.

Эта команда создаст и запустит контейнер `store-web-server` на основе образа сервиса `web_server`, свяжет порт 80 контейнера с портом 80 хост-машины, установит переменные окружения из файла `.env`, примонтирует директории с кодом Flask приложения и статическими файлами фронтенда, установит автоматический перезапуск контейнера.

### 4. Перейдите к приложению по адресу http://localhost